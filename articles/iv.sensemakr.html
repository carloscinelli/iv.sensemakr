<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Sensitivity Analysis for Instrumental Variables using `iv.sensemakr` • iv.sensemakr</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sensitivity Analysis for Instrumental Variables using `iv.sensemakr`">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">iv.sensemakr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/iv.sensemakr.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/carloscinelli/iv.sensemakr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sensitivity Analysis for Instrumental Variables using `iv.sensemakr`</h1>
                        <h4 data-toc-skip class="author">Carlos Cinelli
and Chad Hazlett</h4>
            
            <h4 data-toc-skip class="date">2026-02-08</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/carloscinelli/iv.sensemakr/blob/main/vignettes/iv.sensemakr.Rmd" class="external-link"><code>vignettes/iv.sensemakr.Rmd</code></a></small>
      <div class="d-none name"><code>iv.sensemakr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Instrumental variable (IV) methods are widely used in economics,
epidemiology, and the social sciences to estimate causal effects when
treatment assignment is confounded. A valid IV approach requires,
conditionally on certain observed covariates, that the instrument is not
confounded with the outcome, and that it influences the outcome only by
affecting uptake of the treatment. In recent literature, the first
assumption is usually called <em>exogeneity</em>, <em>ignorability</em>,
or <em>unconfoundedness</em> of the instrument, whereas the second
assumption is called the <em>exclusion restriction</em>. These
assumptions can be violated by omitted confounders of the
instrument-outcome association, and by omitted side-effects of the
instrument that influence the outcome via paths other than through the
treatment.</p>
<p>While these assumptions may sometimes entail testable implications,
they are often unverifiable and must be defended by appealing to domain
knowledge. Whether a given IV study identifies the causal effect of
interest, then, turns on debates as to whether these assumptions hold.
More worryingly, if these assumptions fail, the bias of the IV estimate
may be <em>worse</em> than the original confounding bias of the naive
regression estimate. Therefore, researchers are advised to perform
<em>sensitivity analyses</em> to assess the degree of violation required
to alter the conclusions of a study.</p>
<p>The package <code>iv.sensemakr</code> implements the sensitivity
analysis framework for IV estimates developed in <a href="https://doi.org/10.1093/biomet/asaf004" class="external-link">Cinelli and Hazlett
(2025)</a>, building on the omitted variable bias (OVB) tools of <a href="https://doi.org/10.1111/rssb.12348" class="external-link">Cinelli and Hazlett
(2020)</a>. It provides tools to:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Quantify how strong violations need to be</strong> – in the
form of side-effects (exclusion restriction violations) or confounders
(ignorability violations) – to invalidate the IV findings.</li>
<li>
<strong>Use observed covariates as benchmarks</strong> for
calibrating the plausible strength of such violations.</li>
<li>
<strong>Produce contour plots</strong> that visualize how the IV
confidence interval changes under different assumptions about the
strength of omitted variables.</li>
</ol>
<p>Rather than asking “are the IV assumptions violated?” (which is
generally untestable), the framework asks: <em>“how severely would they
need to be violated to change the research conclusions?”</em> The answer
is given in terms of interpretable partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
parameters, making it easy for researchers and reviewers to assess
whether the magnitude of violation required is plausible.</p>
<p>The main functions in the package are:</p>
<ul>
<li>
<code><a href="../reference/iv_fit.html">iv_fit()</a></code> – fits an IV model using the Anderson-Rubin
(AR) approach;</li>
<li>
<code><a href="../reference/sensemakr.html">sensemakr()</a></code> – runs a sensitivity analysis on an
<code>iv_fit</code> object;</li>
<li>
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> / <code><a href="../reference/ovb_contour_plot.html">ovb_contour_plot()</a></code> – produces
sensitivity contour plots;</li>
<li>
<code><a href="../reference/robustness_value.html">rv()</a></code> / <code><a href="../reference/robustness_value.html">xrv()</a></code> – computes robustness
values;</li>
<li>
<code><a href="../reference/sensitivity_stats.html">sensitivity_stats()</a></code> – computes key sensitivity
statistics.</li>
</ul>
</div>
<div class="section level2">
<h2 id="background-and-running-example">Background and running example<a class="anchor" aria-label="anchor" href="#background-and-running-example"></a>
</h2>
<div class="section level3">
<h3 id="ols-and-the-omitted-variable-bias-problem">OLS and the omitted variable bias problem<a class="anchor" aria-label="anchor" href="#ols-and-the-omitted-variable-bias-problem"></a>
</h3>
<p>Many observational studies have established a positive association
between educational achievement and earnings using regression analysis.
Here we consider the work of <a href="https://doi.org/10.2307/2946682" class="external-link">Card (1995)</a>, who employed a
sample of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mn>3</mn><mo>,</mo><mn>010</mn></mrow><annotation encoding="application/x-tex">n = 3{,}010</annotation></semantics></math>
individuals from the National Longitudinal Survey of Young Men. In a
regression of log wages
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>)
on years of education
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>D</mi><annotation encoding="application/x-tex">D</annotation></semantics></math>),
adjusting for race, experience, and regional factors
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>),
Card found that each additional year of schooling was associated with
approximately 7.5% higher wages. However, educational achievement is not
randomly assigned: individuals who obtain more education may have higher
wages for other reasons, such as family background, or higher levels of
some unobserved characteristic such as <em>Ability</em> or
<em>Motivation</em>. Regression estimates that adjust for only a partial
list of characteristics may thus suffer from omitted variable bias,
likely overestimating the true returns to schooling.</p>
</div>
<div class="section level3">
<h3 id="instrumental-variables-as-a-solution">Instrumental variables as a solution<a class="anchor" aria-label="anchor" href="#instrumental-variables-as-a-solution"></a>
</h3>
<p>IV methods offer an alternative route to estimate the causal effect
of schooling on earnings without having data on those unobserved
variables. The key is to find a new variable (the <em>instrument</em>)
that changes the incentives to educational achievement, but is
associated with earnings only through its effect on education. Card
proposed exploiting the role of geographic differences in college
accessibility: the variable <em>Proximity</em> encodes whether the
individual grew up near a four-year college
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>).
Students who grow up far from the nearest college may face higher
educational costs, discouraging them from pursuing higher level
studies.</p>
<p>The IV estimate is given by the ratio of two OLS coefficients – one
measuring the effect of <em>Proximity</em> on <em>Earnings</em> (the
<em>reduced form</em>), and another measuring the effect of
<em>Proximity</em> on <em>Education</em> (the <em>first stage</em>):
<math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mover><mi>τ</mi><mo accent="true">̂</mo></mover><mrow><mi>I</mi><mi>V</mi></mrow></msub><mo>=</mo><mfrac><msub><mover><mi>λ</mi><mo accent="true">̂</mo></mover><mrow><mi>R</mi><mi>F</mi></mrow></msub><msub><mover><mi>θ</mi><mo accent="true">̂</mo></mover><mrow><mi>F</mi><mi>S</mi></mrow></msub></mfrac></mrow><annotation encoding="application/x-tex">\hat{\tau}_{IV} = \frac{\hat{\lambda}_{RF}}{\hat{\theta}_{FS}}</annotation></semantics></math></p>
</div>
<div class="section level3">
<h3 id="fitting-the-iv-model">Fitting the IV model<a class="anchor" aria-label="anchor" href="#fitting-the-iv-model"></a>
</h3>
<p>The <code>card</code> dataset, included in the package, contains data
from the NLSYM with 3,010 observations. The key variables are:</p>
<ul>
<li>
<code>lwage</code>: log hourly wage in 1976 (outcome).</li>
<li>
<code>educ</code>: years of completed education (treatment).</li>
<li>
<code>nearc4</code>: indicator for proximity to a four-year college
(instrument).</li>
<li>Various covariates: <code>exper</code>, <code>expersq</code>,
<code>black</code>, <code>south</code>, <code>smsa</code>, regional
dummies, <code>smsa66</code>.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://carloscinelli.com/iv.sensemakr/">iv.sensemakr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># load the dataset</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"card"</span><span class="op">)</span></span></code></pre></div>
<p>The function <code><a href="../reference/iv_fit.html">iv_fit()</a></code> takes vectors for the outcome
<code>y</code>, treatment <code>d</code>, instrument <code>z</code>, and
an optional covariate matrix <code>x</code>. It computes IV estimates
using the Anderson-Rubin (AR) approach, which is numerically equivalent
to Two-Stage Least Squares (2SLS) for point estimation, but constructs
confidence intervals via test inversion – a procedure with correct
coverage regardless of instrument strength.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># prepare data</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">card</span><span class="op">$</span><span class="va">lwage</span>  <span class="co"># outcome: log wage</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="va">card</span><span class="op">$</span><span class="va">educ</span>   <span class="co"># treatment: years of education</span></span>
<span><span class="va">z</span> <span class="op">&lt;-</span> <span class="va">card</span><span class="op">$</span><span class="va">nearc4</span> <span class="co"># instrument: proximity to college</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/model.matrix.html" class="external-link">model.matrix</a></span><span class="op">(</span><span class="op">~</span> <span class="va">exper</span> <span class="op">+</span> <span class="va">expersq</span> <span class="op">+</span> <span class="va">black</span> <span class="op">+</span> <span class="va">south</span> <span class="op">+</span> <span class="va">smsa</span> <span class="op">+</span> <span class="va">reg661</span> <span class="op">+</span></span>
<span>                     <span class="va">reg662</span> <span class="op">+</span> <span class="va">reg663</span> <span class="op">+</span> <span class="va">reg664</span> <span class="op">+</span> <span class="va">reg665</span> <span class="op">+</span> <span class="va">reg666</span> <span class="op">+</span></span>
<span>                     <span class="va">reg667</span> <span class="op">+</span> <span class="va">reg668</span> <span class="op">+</span> <span class="va">smsa66</span>,</span>
<span>                   data <span class="op">=</span> <span class="va">card</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># fit the IV model</span></span>
<span><span class="va">card.fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/iv_fit.html">iv_fit</a></span><span class="op">(</span><span class="va">y</span>, <span class="va">d</span>, <span class="va">z</span>, <span class="va">x</span><span class="op">)</span></span>
<span><span class="va">card.fit</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Instrumental Variable Estimation</span></span>
<span><span class="co">#&gt; (Anderson-Rubin Approach)</span></span>
<span><span class="co">#&gt; =============================================</span></span>
<span><span class="co">#&gt; IV Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.132</span></span>
<span><span class="co">#&gt;   t-value: 2.33</span></span>
<span><span class="co">#&gt;   p-value: 0.02</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.025, 0.285]</span></span>
<span><span class="co">#&gt; Note: H0 = 0, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; =============================================</span></span>
<span><span class="co">#&gt; See summary for first stage and reduced form.</span></span></code></pre></div>
<p>The first-stage coefficient reveals that those who grew up near a
college have completed an additional 0.32 years of education, on
average. The reduced-form shows that proximity is associated with about
4.2% higher earnings. The IV estimate is then
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>τ</mi><mo accent="true">̂</mo></mover><mo>≈</mo><mn>0.042</mn><mi>/</mi><mn>0.319</mn><mo>≈</mo><mn>0.132</mn></mrow><annotation encoding="application/x-tex">\hat\tau \approx 0.042/0.319 \approx 0.132</annotation></semantics></math>,
suggesting that each additional year of schooling raises wages by about
13.2%.</p>
<p>The <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method displays all three underlying
regressions (IV, first stage, and reduced form):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">card.fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Instrumental Variable Estimation</span></span>
<span><span class="co">#&gt; (Anderson-Rubin Approach)</span></span>
<span><span class="co">#&gt; =============================================</span></span>
<span><span class="co">#&gt; IV Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.132</span></span>
<span><span class="co">#&gt;   t-value: 2.33</span></span>
<span><span class="co">#&gt;   p-value: 0.02</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.025, 0.285]</span></span>
<span><span class="co">#&gt; Note: H0 = 0, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; ---------------------------------------------</span></span>
<span><span class="co">#&gt; FS Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.32</span></span>
<span><span class="co">#&gt;   Standard Error: 0.0879</span></span>
<span><span class="co">#&gt;   t-value: 3.64</span></span>
<span><span class="co">#&gt;   p-value: 0.000276</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.148, 0.492]</span></span>
<span><span class="co">#&gt; Note: H0 = 0, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; ---------------------------------------------</span></span>
<span><span class="co">#&gt; RF Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.0421</span></span>
<span><span class="co">#&gt;   Standard Error: 0.0181</span></span>
<span><span class="co">#&gt;   t-value: 2.33</span></span>
<span><span class="co">#&gt;   p-value: 0.02</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.007, 0.078]</span></span>
<span><span class="co">#&gt; Note: H0 = 0, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; =============================================</span></span></code></pre></div>
<p>You can use <code><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef()</a></code> and <code><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint()</a></code> to extract
individual components:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># IV estimate and confidence interval</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">card.fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;        iv </span></span>
<span><span class="co">#&gt; 0.1315038</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/confint.html" class="external-link">confint</a></span><span class="op">(</span><span class="va">card.fit</span><span class="op">)</span></span>
<span><span class="co">#&gt; IV conf. interval:</span></span>
<span><span class="co">#&gt; [0.025, 0.285]</span></span>
<span><span class="co">#&gt; level = 0.95</span></span>
<span></span>
<span><span class="co"># first-stage and reduced-form estimates</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">card.fit</span>, parm <span class="op">=</span> <span class="st">"fs"</span><span class="op">)</span></span>
<span><span class="co">#&gt;        fs </span></span>
<span><span class="co">#&gt; 0.3198989</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/coef.html" class="external-link">coef</a></span><span class="op">(</span><span class="va">card.fit</span>, parm <span class="op">=</span> <span class="st">"rf"</span><span class="op">)</span></span>
<span><span class="co">#&gt;         rf </span></span>
<span><span class="co">#&gt; 0.04206794</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-iv-estimate-may-still-suffer-from-omitted-variable-bias">The IV estimate may still suffer from omitted variable bias<a class="anchor" aria-label="anchor" href="#the-iv-estimate-may-still-suffer-from-omitted-variable-bias"></a>
</h3>
<p>The IV estimate relies on the assumption that, conditional on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>,
<em>Proximity</em> and <em>Earnings</em> are unconfounded, and the
effect of <em>Proximity</em> on <em>Earnings</em> must go entirely
through <em>Education</em>. As is often the case, neither assumption is
easy to defend. The same factors that might confound the relationship
between <em>Education</em> and <em>Earnings</em> could similarly
confound the relationship between <em>Proximity</em> and
<em>Earnings</em> (e.g., family wealth or connections). Moreover, the
presence of a college nearby may be associated with high school quality,
which in turn also affects earnings. Finally, geographic factors can
make some localities likely to both have colleges nearby and lead to
higher earnings – these are only coarsely conditioned on by the observed
regional indicators, and residual biases may remain.</p>
<p>Therefore, instead of adjusting for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>
only, we should have adjusted for <em>both</em> the observed covariates
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math><em>and</em> unobserved covariates
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>,
where
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>
stands for all unobserved factors necessary to make <em>Proximity</em> a
valid instrument for the effect of <em>Education</em> on
<em>Earnings</em>. The question becomes: how do the IV estimates from
the model without
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>
compare with the estimates from the model with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>?</p>
</div>
</div>
<div class="section level2">
<h2 id="sensitivity-analysis">Sensitivity analysis<a class="anchor" aria-label="anchor" href="#sensitivity-analysis"></a>
</h2>
<div class="section level3">
<h3 id="the-sensitivity-parameters">The sensitivity parameters<a class="anchor" aria-label="anchor" href="#the-sensitivity-parameters"></a>
</h3>
<p>The <code>iv.sensemakr</code> framework parametrizes the strength of
potential side-effects and confounders using two partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
measures:</p>
<ul>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>Z</mi><mo>∼</mo><mi>W</mi><mo stretchy="false" form="prefix">|</mo><mi>X</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Z \sim W | X}</annotation></semantics></math>:
the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of the omitted variable(s)
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>
with the instrument
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>,
given the observed covariates
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>.
This measures how much of the residual variation in the instrument is
“explained” by
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>.</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><msub><mi>Y</mi><mn>0</mn></msub><mo>∼</mo><mi>W</mi><mo stretchy="false" form="prefix">|</mo><mi>Z</mi><mo>,</mo><mi>X</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Y_0 \sim W | Z, X}</annotation></semantics></math>:
the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
of
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>
with the potential outcome
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">Y(0)</annotation></semantics></math>,
given
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>.
Under a constant treatment effects model, this has a simple
interpretation – it stands for how much residual variation confounders
or side-effects explain of the untreated potential outcome.</p></li>
</ul>
<p>When both of these partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
values are zero, the IV assumptions hold and the estimate is valid. As
these values increase, the bias grows. The sensitivity analysis asks:
<em>for what combinations of these two parameters do the IV results
change enough to overturn the research conclusions?</em></p>
</div>
<div class="section level3">
<h3 id="running-sensemakr">Running sensemakr<a class="anchor" aria-label="anchor" href="#running-sensemakr"></a>
</h3>
<p>The <code><a href="../reference/sensemakr.html">sensemakr()</a></code> function takes an <code>iv_fit</code>
object and computes sensitivity statistics. Here we show the call with
all parameters made explicit, and then the simplified version using
defaults:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># with all parameters shown explicitly</span></span>
<span><span class="va">card.sens</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sensemakr.html">sensemakr</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                       benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                       kz <span class="op">=</span> <span class="fl">1</span>,               <span class="co"># benchmark multiplier for Z</span></span>
<span>                       ky <span class="op">=</span> <span class="fl">1</span>,               <span class="co"># benchmark multiplier for Y(0)</span></span>
<span>                       q <span class="op">=</span> <span class="fl">1</span>,                <span class="co"># reduce estimate to zero</span></span>
<span>                       alpha <span class="op">=</span> <span class="fl">0.05</span>,         <span class="co"># significance level</span></span>
<span>                       min <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>           <span class="co"># biases &gt;= q (default)</span></span></code></pre></div>
<p>In most cases, the defaults are appropriate:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">card.sens</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sensemakr.html">sensemakr</a></span><span class="op">(</span><span class="va">card.fit</span>, benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">card.sens</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Analysis for Instrumental Variables</span></span>
<span><span class="co">#&gt; (Anderson-Rubin Approach)</span></span>
<span><span class="co">#&gt; =============================================================</span></span>
<span><span class="co">#&gt; IV Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.132</span></span>
<span><span class="co">#&gt;   t-value: 2.33</span></span>
<span><span class="co">#&gt;   p-value: 0.02</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.025, 0.285]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Statistics:</span></span>
<span><span class="co">#&gt;   Extreme Robustness Value: 0.000523</span></span>
<span><span class="co">#&gt;   Robustness Value: 0.00667</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bounds on Omitted Variable Bias:</span></span>
<span><span class="co">#&gt;  Bound Label  R2zw.x R2y0w.zx Lower CI Upper CI Crit. Thr.</span></span>
<span><span class="co">#&gt;     1x black 0.00221   0.0750  -0.0212    0.402       2.59</span></span>
<span><span class="co">#&gt;      1x smsa 0.00639   0.0202  -0.0192    0.396       2.57</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note: H0 = 0, q &gt;= 1, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; =============================================================</span></span>
<span><span class="co">#&gt; See summary for first stage and reduced form.</span></span></code></pre></div>
<p>The parameters control:</p>
<ul>
<li>
<code>benchmark_covariates</code>: observed covariates used to bound
the plausible strength of the omitted variables. Here we use
<code>"black"</code> and <code>"smsa"</code> (metropolitan area
indicator) as reference points.</li>
<li>
<code>kz</code>, <code>ky</code>, <code>kd</code>: multipliers that
scale the benchmark bounds. For instance, <code>kz = 2</code> asks “what
if the omitted variable is twice as strongly related to the instrument
as the benchmark covariate?”</li>
<li>
<code>q</code>: the fraction of the effect to be explained away.
Default is 1 (bring the estimate to zero).</li>
<li>
<code>alpha</code>: significance level for hypothesis tests and
confidence intervals.</li>
<li>
<code>min</code>: when <code>TRUE</code> (default), the robustness
value accounts for biases as large <em>or larger</em> than needed,
yielding
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>V</mi><mo>=</mo><mo>min</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>R</mi><msub><mi>V</mi><mi>ϕ</mi></msub><mo>,</mo><mi>R</mi><msub><mi>V</mi><mrow><mi>F</mi><mi>S</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">RV = \min(RV_\phi, RV_{FS})</annotation></semantics></math>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="interpreting-the-results">Interpreting the results<a class="anchor" aria-label="anchor" href="#interpreting-the-results"></a>
</h3>
<p>The output reports sensitivity statistics for the IV estimate: the
Extreme Robustness Value (XRV) and the Robustness Value (RV), along with
bounds on omitted variable bias for each benchmark covariate.</p>
<p>The <strong>Robustness Value (RV)</strong> is the minimum partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
that confounders or side-effects would need to have with <em>both</em>
the instrument and the outcome in order to make the adjusted confidence
interval include zero. The larger the RV, the more robust the
result.</p>
<p>The <strong>Extreme Robustness Value (XRV)</strong> describes the
minimum strength of association that omitted variables need to have with
the <em>instrument alone</em> in order to be problematic (under the
worst-case scenario for the association with the outcome).</p>
<p>In the Card example, the RV is about 0.67%, revealing that
confounders or side-effects explaining just 0.67% of the residual
variation both of <em>Proximity</em> and of (log) <em>Earnings</em> are
already sufficient to make the IV estimate statistically insignificant.
The XRV is even smaller (about 0.05%), meaning that if we are not
willing to impose constraints on the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
with the outcome, omitted variables need only explain 0.05% of the
residual variation of the instrument to be problematic.</p>
<p>The full summary, including sensitivity statistics for the
first-stage and reduced-form regressions, is obtained with
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">card.sens</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Analysis for Instrumental Variables</span></span>
<span><span class="co">#&gt; (Anderson-Rubin Approach)</span></span>
<span><span class="co">#&gt; =============================================================</span></span>
<span><span class="co">#&gt; IV Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.132</span></span>
<span><span class="co">#&gt;   t-value: 2.33</span></span>
<span><span class="co">#&gt;   p-value: 0.02</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.025, 0.285]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Statistics:</span></span>
<span><span class="co">#&gt;   Extreme Robustness Value: 0.000523</span></span>
<span><span class="co">#&gt;   Robustness Value: 0.00667</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bounds on Omitted Variable Bias:</span></span>
<span><span class="co">#&gt;  Bound Label  R2zw.x r2y0w.zx Lower CI Upper CI Crit. Thr.</span></span>
<span><span class="co">#&gt;     1x black 0.00221   0.0750  -0.0212    0.402       2.59</span></span>
<span><span class="co">#&gt;      1x smsa 0.00639   0.0202  -0.0192    0.396       2.57</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note: H0 = 0, q &gt;= 1, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; -------------------------------------------------------------</span></span>
<span><span class="co">#&gt; FS Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.32</span></span>
<span><span class="co">#&gt;   Standard Error: 0.0879</span></span>
<span><span class="co">#&gt;   t-value: 3.64</span></span>
<span><span class="co">#&gt;   p-value: 0.000276</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.148, 0.492]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Statistics:</span></span>
<span><span class="co">#&gt;   Extreme Robustness Value: 0.00313</span></span>
<span><span class="co">#&gt;   Robustness Value: 0.0302</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bounds on Omitted Variable Bias:</span></span>
<span><span class="co">#&gt;  Bound Label  R2zw.x R2dw.zx Lower CI Upper CI Crit. Thr.</span></span>
<span><span class="co">#&gt;     1x black 0.00221 0.03342    0.109    0.531       2.40</span></span>
<span><span class="co">#&gt;      1x smsa 0.00639 0.00498    0.120    0.520       2.27</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note: H0 = 0, q = 1, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; -------------------------------------------------------------</span></span>
<span><span class="co">#&gt; RF Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.0421</span></span>
<span><span class="co">#&gt;   Standard Error: 0.0181</span></span>
<span><span class="co">#&gt;   t-value: 2.33</span></span>
<span><span class="co">#&gt;   p-value: 0.02</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.007, 0.078]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Statistics:</span></span>
<span><span class="co">#&gt;   Extreme Robustness Value: 0.000523</span></span>
<span><span class="co">#&gt;   Robustness Value: 0.00667</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bounds on Omitted Variable Bias:</span></span>
<span><span class="co">#&gt;  Bound Label  R2zw.x R2yw.zx Lower CI Upper CI Crit. Thr.</span></span>
<span><span class="co">#&gt;     1x black 0.00221  0.0657 -0.00418   0.0883       2.56</span></span>
<span><span class="co">#&gt;      1x smsa 0.00639  0.0197 -0.00429   0.0884       2.56</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note: H0 = 0, q = 1, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; =============================================================</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="the-rv-decomposition">The RV decomposition<a class="anchor" aria-label="anchor" href="#the-rv-decomposition"></a>
</h3>
<p>The robustness value for the IV estimate decomposes into two
components:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mrow><mi>I</mi><mi>V</mi></mrow></msub><mo>=</mo><mo>min</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>R</mi><msub><mi>V</mi><mi>ϕ</mi></msub><mo>,</mo><mi>R</mi><msub><mi>V</mi><mrow><mi>F</mi><mi>S</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">RV_{IV} = \min(RV_\phi, RV_{FS})</annotation></semantics></math></p>
<ul>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mi>ϕ</mi></msub></mrow><annotation encoding="application/x-tex">RV_\phi</annotation></semantics></math>
measures the robustness of the “exclusion restriction” component: how
strong would omitted variables need to be in order to change inference
on the Anderson-Rubin regression?</p></li>
<li><p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mrow><mi>F</mi><mi>S</mi></mrow></msub></mrow><annotation encoding="application/x-tex">RV_{FS}</annotation></semantics></math>
measures the robustness of the first stage: how strong would omitted
variables need to be in order to drive the first-stage coefficient to
zero?</p></li>
</ul>
<p>The IV robustness value is the minimum of these two. When the first
stage is strong
(<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mrow><mi>F</mi><mi>S</mi></mrow></msub></mrow><annotation encoding="application/x-tex">RV_{FS}</annotation></semantics></math>
is large), robustness is driven by
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><msub><mi>V</mi><mi>ϕ</mi></msub></mrow><annotation encoding="application/x-tex">RV_\phi</annotation></semantics></math>.
This is the case in our running example, where the binding constraint
comes from the reduced form, not from the first-stage strength. You can
access these components directly:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># IV robustness value (minimum of the two)</span></span>
<span><span class="fu"><a href="../reference/robustness_value.html">rv</a></span><span class="op">(</span><span class="va">card.fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;      iv </span></span>
<span><span class="co">#&gt; 0.00667 </span></span>
<span><span class="co">#&gt; Parameters: q &gt;= 1, alpha = 0.05</span></span>
<span></span>
<span><span class="co"># first-stage robustness value</span></span>
<span><span class="fu"><a href="../reference/robustness_value.html">rv</a></span><span class="op">(</span><span class="va">card.fit</span>, parm <span class="op">=</span> <span class="st">"fs"</span><span class="op">)</span></span>
<span><span class="co">#&gt;     fs </span></span>
<span><span class="co">#&gt; 0.0302 </span></span>
<span><span class="co">#&gt; Parameters: q = 1, alpha = 0.05, invert = FALSE</span></span>
<span></span>
<span><span class="co"># reduced-form robustness value</span></span>
<span><span class="fu"><a href="../reference/robustness_value.html">rv</a></span><span class="op">(</span><span class="va">card.fit</span>, parm <span class="op">=</span> <span class="st">"rf"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      rf </span></span>
<span><span class="co">#&gt; 0.00667 </span></span>
<span><span class="co">#&gt; Parameters: q = 1, alpha = 0.05, invert = FALSE</span></span></code></pre></div>
<p>The <code><a href="../reference/sensitivity_stats.html">sensitivity_stats()</a></code> function provides a summary
table including both the RV and XRV alongside the estimates and
confidence intervals:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/sensitivity_stats.html">sensitivity_stats</a></span><span class="op">(</span><span class="va">card.fit</span><span class="op">)</span></span>
<span><span class="co">#&gt;     estimate        lwr       upr  t.value       xrv_qa       rv_qa q min alpha</span></span>
<span><span class="co">#&gt; iv 0.1315038 0.02480484 0.2848236 2.327075 0.0005232443 0.006666407 1   1  0.05</span></span>
<span><span class="co">#&gt;     dof</span></span>
<span><span class="co">#&gt; iv 2994</span></span>
<span><span class="fu"><a href="../reference/sensitivity_stats.html">sensitivity_stats</a></span><span class="op">(</span><span class="va">card.fit</span>, parm <span class="op">=</span> <span class="st">"fs"</span><span class="op">)</span></span>
<span><span class="co">#&gt;     estimate       lwr       upr t.value      xrv_qa      rv_qa q min alpha</span></span>
<span><span class="co">#&gt; fs 0.3198989 0.1476194 0.4921785 3.64085 0.003129076 0.03023129 1   1  0.05</span></span>
<span><span class="co">#&gt;     dof</span></span>
<span><span class="co">#&gt; fs 2994</span></span>
<span><span class="fu"><a href="../reference/sensitivity_stats.html">sensitivity_stats</a></span><span class="op">(</span><span class="va">card.fit</span>, parm <span class="op">=</span> <span class="st">"rf"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      estimate         lwr        upr  t.value       xrv_qa       rv_qa q min</span></span>
<span><span class="co">#&gt; rf 0.04206794 0.006622162 0.07751371 2.327075 0.0005232443 0.006666407 1   1</span></span>
<span><span class="co">#&gt;    alpha  dof</span></span>
<span><span class="co">#&gt; rf  0.05 2994</span></span></code></pre></div>
<p>Note that the (extreme) robustness value of the IV estimate required
to bring the lower limit of the confidence interval to zero or below is
the minimum of the (extreme) robustness value of the reduced form and
the (extreme) robustness value of the first stage evaluated at the zero
null. In our running example, the reduced form is more fragile, thus the
sensitivity of the IV hinges critically on the sensitivity of the
reduced form.</p>
</div>
</div>
<div class="section level2">
<h2 id="sensitivity-contour-plots">Sensitivity contour plots<a class="anchor" aria-label="anchor" href="#sensitivity-contour-plots"></a>
</h2>
<p>It is often valuable to assess the sensitivity of the IV estimate
against hypotheses <em>other than zero</em>. Contour plots show the
whole range of adjusted lower and upper limits of the Anderson-Rubin
confidence interval against various strengths of the omitted variables
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">card.sens</span>, lim <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span></span></code></pre></div>
<p><img src="iv.sensemakr_files/figure-html/plot-ci-1.png" class="r-plt" alt="" width="1500" style="display: block; margin: auto;"></p>
<p>Each contour plot shows:</p>
<ul>
<li>
<strong>x-axis</strong>: hypothetical bounds on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>Z</mi><mo>∼</mo><mi>W</mi><mo stretchy="false" form="prefix">|</mo><mi>X</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Z \sim W|X}</annotation></semantics></math>.</li>
<li>
<strong>y-axis</strong>: hypothetical bounds on
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><msub><mi>Y</mi><mn>0</mn></msub><mo>∼</mo><mi>W</mi><mo stretchy="false" form="prefix">|</mo><mi>Z</mi><mo>,</mo><mi>X</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Y_0 \sim W|Z,X}</annotation></semantics></math>.</li>
<li>
<strong>Contour lines</strong>: levels of the worst-case adjusted CI
bound.</li>
<li>
<strong>Red dashed line</strong>: the critical threshold (zero), as
well as the boundary beyond which confidence intervals become
unbounded.</li>
<li>
<strong>Labeled points</strong>: benchmark bounds, showing where
observed covariates fall on this plot.</li>
</ul>
<p>The point labeled “Unadjusted” at the origin represents the original
estimate (no violation of the IV assumptions). As we move away from the
origin (stronger omitted variables), the confidence interval widens.</p>
<p>You can also produce individual plots for specific aspects of the
sensitivity analysis:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># lower limit of the CI</span></span>
<span><span class="fu"><a href="../reference/ovb_contour_plot.html">ovb_contour_plot</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                 benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                 sensitivity.of <span class="op">=</span> <span class="st">"lwr"</span>,</span>
<span>                 lim <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span></span></code></pre></div>
<p><img src="iv.sensemakr_files/figure-html/plot-lwr-1.png" class="r-plt" alt="" width="825" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># upper limit of the CI</span></span>
<span><span class="fu"><a href="../reference/ovb_contour_plot.html">ovb_contour_plot</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                 benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                 sensitivity.of <span class="op">=</span> <span class="st">"upr"</span>,</span>
<span>                 lim <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span></span></code></pre></div>
<p><img src="iv.sensemakr_files/figure-html/plot-upr-1.png" class="r-plt" alt="" width="825" style="display: block; margin: auto;"></p>
<p>The t-value contour plot shows how the Anderson-Rubin test statistic
changes:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># t-value contour plot</span></span>
<span><span class="fu"><a href="../reference/ovb_contour_plot.html">ovb_contour_plot</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                 benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                 sensitivity.of <span class="op">=</span> <span class="st">"t-value"</span>,</span>
<span>                 lim <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span></span></code></pre></div>
<p><img src="iv.sensemakr_files/figure-html/plot-tval-1.png" class="r-plt" alt="" width="825" style="display: block; margin: auto;"></p>
<div class="section level3">
<h3 id="first-stage-and-reduced-form-sensitivity">First-stage and reduced-form sensitivity<a class="anchor" aria-label="anchor" href="#first-stage-and-reduced-form-sensitivity"></a>
</h3>
<p>The sensitivity of the auxiliary regressions can also be assessed.
The first-stage sensitivity shows how robust the instrument relevance
condition is:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ovb_contour_plot.html">ovb_contour_plot</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                 benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                 sensitivity.of <span class="op">=</span> <span class="st">"t-value"</span>,</span>
<span>                 parm <span class="op">=</span> <span class="st">"fs"</span>,</span>
<span>                 lim <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span></span></code></pre></div>
<p><img src="iv.sensemakr_files/figure-html/plot-fs-1.png" class="r-plt" alt="" width="825" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ovb_contour_plot.html">ovb_contour_plot</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                 benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                 sensitivity.of <span class="op">=</span> <span class="st">"t-value"</span>,</span>
<span>                 parm <span class="op">=</span> <span class="st">"rf"</span>,</span>
<span>                 lim <span class="op">=</span> <span class="fl">0.09</span><span class="op">)</span></span></code></pre></div>
<p><img src="iv.sensemakr_files/figure-html/plot-rf-1.png" class="r-plt" alt="" width="825" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level2">
<h2 id="benchmarking-and-bounds">Benchmarking and bounds<a class="anchor" aria-label="anchor" href="#benchmarking-and-bounds"></a>
</h2>
<div class="section level3">
<h3 id="using-observed-covariates-as-benchmarks">Using observed covariates as benchmarks<a class="anchor" aria-label="anchor" href="#using-observed-covariates-as-benchmarks"></a>
</h3>
<p>A central feature of the framework is the use of observed covariates
as <strong>benchmarks</strong> for assessing the plausible strength of
omitted variables. The benchmark bounds are computed by
<code><a href="../reference/sensemakr.html">sensemakr()</a></code> and reported alongside the sensitivity
statistics:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">card.sens</span><span class="op">$</span><span class="va">bounds</span><span class="op">$</span><span class="va">iv</span></span>
<span><span class="co">#&gt;   bound_label      r2zw.x   r2y0w.zx         lwr       upr t.dagger</span></span>
<span><span class="co">#&gt; 1    1x black 0.002214715 0.07499929 -0.02121559 0.4019120 2.594187</span></span>
<span><span class="co">#&gt; 2     1x smsa 0.006394072 0.02018201 -0.01923060 0.3957506 2.571007</span></span></code></pre></div>
<p>Each row shows:</p>
<ul>
<li>
<strong>Bound Label</strong>: the benchmark covariate and multiplier
(e.g., <code>1x smsa</code> means “as strong as SMSA”).</li>
<li>
<strong>R2zw.x</strong>: the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
bound for the omitted variable’s association with the instrument.</li>
<li>
<strong>R2y0w.zx</strong>: the partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
bound for the omitted variable’s association with the potential
outcome.</li>
<li>
<strong>Lower CI / Upper CI</strong>: the adjusted confidence
interval under this bound.</li>
<li>
<strong>Crit. Thr.</strong>: the bias-adjusted critical value.</li>
</ul>
<p>In the Card example, confounding as strong as <em>SMSA</em> (an
indicator for metropolitan area, with
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>R</mi><mrow><mi>Y</mi><mo>∼</mo><mi>W</mi><mo stretchy="false" form="prefix">|</mo><mi>Z</mi><mo>,</mo><mi>X</mi></mrow><mn>2</mn></msubsup><mo>≈</mo><mn>2</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">R^2_{Y \sim W| Z, X} \approx 2\%</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>R</mi><mrow><mi>W</mi><mo>∼</mo><mi>Z</mi><mo stretchy="false" form="prefix">|</mo><mi>X</mi></mrow><mn>2</mn></msubsup><mo>≈</mo><mn>0.6</mn><mi>%</mi></mrow><annotation encoding="application/x-tex">R^2_{W \sim Z| X} \approx 0.6\%</annotation></semantics></math>)
produces a bias-adjusted critical value of approximately 2.55. Since the
observed t-value (2.33) is <em>less</em> than this adjusted threshold,
this immediately reveals that confounding as strong as SMSA – e.g.,
residual geographic confounding – is already sufficiently strong to be
problematic.</p>
<p>As the contour plots reveal, both confounding as strong as
<em>SMSA</em> or as strong as <em>Black</em> could lead to a confidence
interval that includes not only implausibly high values, but also
negative values, and is thus too wide for any meaningful conclusions.
Since it is not very difficult to imagine residual confounders as strong
or stronger than those (e.g., parental income, finer-grained geographic
location, etc.), these results call into question the strength of
evidence provided by this study.</p>
</div>
<div class="section level3">
<h3 id="scaling-the-benchmarks">Scaling the benchmarks<a class="anchor" aria-label="anchor" href="#scaling-the-benchmarks"></a>
</h3>
<p>You can use the multiplier arguments <code>kz</code> and
<code>ky</code> to consider omitted variables stronger than the
benchmark:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># what if omitted variables are twice as strong as the benchmarks?</span></span>
<span><span class="va">card.2x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sensemakr.html">sensemakr</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                     benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                     kz <span class="op">=</span> <span class="fl">2</span>,</span>
<span>                     ky <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">card.2x</span><span class="op">$</span><span class="va">bounds</span><span class="op">$</span><span class="va">iv</span></span>
<span><span class="co">#&gt;   bound_label     r2zw.x   r2y0w.zx         lwr       upr t.dagger</span></span>
<span><span class="co">#&gt; 1    2x black 0.00442943 0.15000005 -0.09557196 0.7750155 3.225593</span></span>
<span><span class="co">#&gt; 2     2x smsa 0.01278814 0.04036735 -0.08882547 0.7236338 3.184735</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="manual-bounds">Manual bounds<a class="anchor" aria-label="anchor" href="#manual-bounds"></a>
</h3>
<p>You can also provide specific hypothetical partial
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>R</mi><mn>2</mn></msup><annotation encoding="application/x-tex">R^2</annotation></semantics></math>
values directly:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">card.manual</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sensemakr.html">sensemakr</a></span><span class="op">(</span><span class="va">card.fit</span>,</span>
<span>                         benchmark_covariates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"black"</span>, <span class="st">"smsa"</span><span class="op">)</span>,</span>
<span>                         r2zw.x <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>                         r2y0w.zx <span class="op">=</span> <span class="fl">0.02</span>,</span>
<span>                         bound_label <span class="op">=</span> <span class="st">"Manual (2%)"</span><span class="op">)</span></span>
<span><span class="va">card.manual</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Analysis for Instrumental Variables</span></span>
<span><span class="co">#&gt; (Anderson-Rubin Approach)</span></span>
<span><span class="co">#&gt; =============================================================</span></span>
<span><span class="co">#&gt; IV Estimates:</span></span>
<span><span class="co">#&gt;   Coef. Estimate: 0.132</span></span>
<span><span class="co">#&gt;   t-value: 2.33</span></span>
<span><span class="co">#&gt;   p-value: 0.02</span></span>
<span><span class="co">#&gt;   Conf. Interval: [0.025, 0.285]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Sensitivity Statistics:</span></span>
<span><span class="co">#&gt;   Extreme Robustness Value: 0.000523</span></span>
<span><span class="co">#&gt;   Robustness Value: 0.00667</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Bounds on Omitted Variable Bias:</span></span>
<span><span class="co">#&gt;  Bound Label  R2zw.x R2y0w.zx Lower CI Upper CI Crit. Thr.</span></span>
<span><span class="co">#&gt;  Manual (2%) 0.02000   0.0200  -0.0715    0.613       3.07</span></span>
<span><span class="co">#&gt;     1x black 0.00221   0.0750  -0.0212    0.402       2.59</span></span>
<span><span class="co">#&gt;      1x smsa 0.00639   0.0202  -0.0192    0.396       2.57</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Note: H0 = 0, q &gt;= 1, alpha = 0.05, df = 2994.</span></span>
<span><span class="co">#&gt; =============================================================</span></span>
<span><span class="co">#&gt; See summary for first stage and reduced form.</span></span></code></pre></div>
<p>The manual bound appears alongside the benchmark-based bounds. You
can specify different values for
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><mi>Z</mi><mo>∼</mo><mi>W</mi><mo stretchy="false" form="prefix">|</mo><mi>X</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Z \sim W|X}</annotation></semantics></math>
and
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>R</mi><mrow><msub><mi>Y</mi><mn>0</mn></msub><mo>∼</mo><mi>W</mi><mo stretchy="false" form="prefix">|</mo><mi>Z</mi><mo>,</mo><mi>X</mi></mrow><mn>2</mn></msubsup><annotation encoding="application/x-tex">R^2_{Y_0 \sim W|Z,X}</annotation></semantics></math>
if you believe the omitted variable is more strongly related to one than
the other.</p>
</div>
</div>
<div class="section level2">
<h2 id="discussion">Discussion<a class="anchor" aria-label="anchor" href="#discussion"></a>
</h2>
<p>The sensitivity analysis tools in <code>iv.sensemakr</code> provide
logical deductions aimed at: (i) revealing the consequences of varying
degrees of violation of the IV assumptions (e.g., via bias-adjusted
critical values), and (ii) determining the minimal degree of violation
necessary to overturn certain conclusions (e.g., via robustness values).
This shifts the scientific debate from arguing whether latent
confounders or side-effects of an instrument have exactly zero strength
– an indefensible claim in most settings – to a more realistic
discussion about whether we can confidently rule out strengths that are
shown to be problematic.</p>
<p>The results of sensitivity analyses are not always self-evident and
can often be surprising. They may reveal that certain studies are highly
sensitive to plausible perturbations of the IV assumptions, while others
remain robust despite such perturbations. In our running example, the
sensitivity analysis reveals that the returns-to-schooling IV estimate,
while statistically significant, can be overturned by confounders as
strong as covariates already observed in the data (such as metropolitan
area status or race). This calls for careful discussion about whether
such residual confounding is plausible.</p>
<p>It is important to note that plausibility judgments inevitably depend
on expert knowledge and can vary substantially across scientific
disciplines and the quality of the research design. In an observational
study without randomization or a rich set of measured confounders, it
would be hard to rule out latent confounders explaining 1% of the
residual variation of the instrument. This seems to be the case in the
Card example, where residual geographic confounders could plausibly
attain such strength. In other contexts, however, a value of 1% may be
large – for instance, in a Mendelian randomization study where the main
concern is pleiotropy.</p>
<p>It is also important to emphasize that sensitivity to unobserved
variables is distinct from the “weak instruments” problem. The latter
depends on sample size, whereas the former does not. Instruments deemed
“strong” by conventional statistics (e.g., large F-statistics) may still
be fragile in the face of unobserved variables that violate the IV
assumptions.</p>
</div>
<div class="section level2">
<h2 id="going-further">Going further<a class="anchor" aria-label="anchor" href="#going-further"></a>
</h2>
<p>This vignette covered the core workflow. For additional features and
details:</p>
<ul>
<li>Adjusting <code>q</code> and <code>alpha</code> to explore different
hypothesis testing scenarios.</li>
<li>Asymmetric multipliers (<code>kz</code>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mo>≠</mo><annotation encoding="application/x-tex">\neq</annotation></semantics></math><code>ky</code>) for non-equal benchmark scaling.</li>
<li>Inspecting the first-stage and reduced-form bounds
(<code>card.sens$bounds$fs</code>,
<code>card.sens$bounds$rf</code>).</li>
<li>The methodological foundations in <a href="https://doi.org/10.1093/biomet/asaf004" class="external-link">Cinelli and Hazlett
(2025)</a>.</li>
</ul>
<p>See the package documentation (<code><a href="../reference/sensemakr.html">?sensemakr</a></code>,
<code><a href="../reference/iv_fit.html">?iv_fit</a></code>, <code><a href="../reference/ovb_contour_plot.html">?ovb_contour_plot</a></code>) for the full set
of options and examples.</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li><p>Anderson, T.W. and Rubin, H. (1949), “Estimation of the
parameters of a single equation in a complete system of stochastic
equations,” <em>Annals of Mathematical Statistics</em>, 20,
46–63.</p></li>
<li><p>Card, D. (1995), “Using geographic variation in college proximity
to estimate the return to schooling,” in <em>Aspects of Labour Market
Behaviour: Essays in Honour of John Vanderkamp</em>.</p></li>
<li><p>Cinelli, C. and Hazlett, C. (2020), “Making Sense of Sensitivity:
Extending Omitted Variable Bias,” <em>Journal of the Royal Statistical
Society, Series B (Statistical Methodology)</em>. <a href="https://doi.org/10.1111/rssb.12348" class="external-link">doi:10.1111/rssb.12348</a>.</p></li>
<li><p>Cinelli, C. and Hazlett, C. (2025), “An Omitted Variable Bias
Framework for Sensitivity Analysis of Instrumental Variables,”
<em>Biometrika</em>. <a href="https://doi.org/10.1093/biomet/asaf004" class="external-link">doi:10.1093/biomet/asaf004</a>.</p></li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://carloscinelli.com" class="external-link">Carlos Cinelli</a>, <a href="https://www.chadhazlett.com" class="external-link">Chad Hazlett</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
